程序运行时，经常需要根据当前的状态来执行不同的分支。条件语句 if和switch最常使用。另外也可以定义一个函数指针，当条件改变时，去执行不同的分支，这样具有更快的速度，特别是，当分支很多时，因为不用多次比较，速度的优势更加明显。使用以下的测试代码得到的结果是，即使只比较一次，使用函数指针的方式仍然具有稍微速度优势(但可能不具备内存优势)。


```cpp
//Note：禁用编译器优化！
#include <chrono>
#include <iostream>
bool b = true;
void fun() {}
void (*fun_ptr)() = &fun;
int main()
{
	auto start = std::chrono::system_clock::now();
	for (long long i = 0; i < 1'000'000'000; ++i) {
		//if (b) {
		//	//23192275
		//	//23928494
		//}
		//fun();
		//	//22410635
		//	//21921620

		fun_ptr();
		//21453387

	}

	auto end = std::chrono::system_clock::now();
	std::cout << (end - start).count();
}
```

原因可能是，计算机运行任何一个语句，都需要寻址，使用函数指针也是寻址，取出一个变量也是寻址，使用函数指针就没有判断这一个步。

另外，从算法逻辑这一步来看，当改变程序运行时的状态时，就不需要在一个函数每次运行时都要检测状态了，使用函数指针是最简洁的方式。

参考（C++函数式编程）